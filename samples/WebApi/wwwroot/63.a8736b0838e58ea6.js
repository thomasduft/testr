"use strict";(self.webpackChunkwebclient=self.webpackChunkwebclient||[]).push([[63],{7063:(q,T,n)=>{n.r(T),n.d(T,{HolidayModule:()=>p});var d=n(6895),_=n(5699),M=n(9116),C=n(5202),a=n(337),D=n(709),O=n(655),v=n(5570),e=n(5062),I=n(7165);class l{constructor(i){this._http=i}myWork(){return this._http.get("holiday/mywork")}get(i){return this._http.get(`holiday/${i}`)}create(){return this._http.post("holiday/new",null)}apply(i){return this._http.post("holiday/apply",i)}approve(i){return this._http.post("holiday/approve",i)}reject(i){return this._http.post("holiday/reject",i)}static#e=this.\u0275fac=function(t){return new(t||l)(e.LFG(I.O))};static#t=this.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac})}class g{constructor(){this.key=g.KEY,this.type=a.AF,this.title="Apply for holidays",this.editors=[{key:"from",type:a.jv,label:"From",required:!0},{key:"to",type:a.jv,label:"To",required:!0},{key:"message",type:a.P8,label:"Message"}]}static#e=this.KEY="apply_holidaydetailslot"}class f{constructor(){this.key=f.KEY,this.type=a.AF,this.title="Approve Holiday",this.editors=[{key:"id",type:a.md,label:"Id",required:!0},{key:"message",type:a.P8,label:"Message",required:!1}]}static#e=this.KEY="approve_holidaydetailslot"}var H=n(8613),S=n(5108),L=n(1803);const Z=["formDef"];function N(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"tw-trigger-info",4),e.NdJ("trigger",function(r){e.CHM(t);const c=e.oxw();return e.KtG(c.triggerClicked(r))}),e.qZA()}if(2&s){const t=e.oxw(),o=e.MAs(4);e.Q6J("canTrigger",o.formIsValid)("triggerInfo",t.triggerInfo)}}function E(s,i){if(1&s&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t.author),e.xp6(2),e.Oqu(t.message)}}function b(s,i){if(1&s&&(e.TgZ(0,"div",6)(1,"h5"),e.SDv(2,7),e.qZA(),e.TgZ(3,"table")(4,"thead")(5,"tr")(6,"th"),e.SDv(7,8),e.qZA(),e.TgZ(8,"th"),e.SDv(9,9),e.qZA()()(),e.TgZ(10,"tbody"),e.YNc(11,E,5,2,"tr",10),e.qZA()()()),2&s){const t=e.oxw(2);e.xp6(11),e.Q6J("ngForOf",t.entity.messages)}}function R(s,i){if(1&s&&(e.TgZ(0,"div")(1,"p")(2,"b"),e._uU(3),e.qZA(),e._uU(4," applied for holiday between "),e.TgZ(5,"b"),e._uU(6),e.ALo(7,"date"),e.qZA(),e._uU(8," and "),e.TgZ(9,"b"),e._uU(10),e.ALo(11,"date"),e.qZA(),e._uU(12,". "),e.qZA(),e.YNc(13,b,12,1,"div",5),e.qZA()),2&s){const t=e.oxw();e.xp6(3),e.Oqu(t.entity.requester),e.xp6(3),e.Oqu(e.lcZ(7,4,t.entity.from)),e.xp6(4),e.Oqu(e.lcZ(11,6,t.entity.to)),e.xp6(3),e.Q6J("ngIf",t.entity.messages&&t.entity.messages.length>0)}}let u=class y{constructor(i,t,o,r){this._route=i,this._router=t,this._user=o,this._service=r,this.key=g.KEY,this.canTrigger=!1}ngOnInit(){this._routeParams$=this._route.params.subscribe(i=>{i.id&&this.init(i.id)})}submitted(i){console.log(i)}triggerClicked(i){"apply"===i&&this._service.apply(this.formDef.formValue).subscribe(t=>{this.checkResponse(t)}),"approve"===i&&this._service.approve(this.formDef.formValue).subscribe(t=>{this.checkResponse(t)}),"reject"===i&&this._service.reject(this.formDef.formValue).subscribe(t=>{this.checkResponse(t)})}init(i){"new"!==i?this.load(i.toString()):this.create()}load(i){this._holiday$=this._service.get(i).subscribe(t=>{this.key=f.KEY,this.viewModel=t.viewModel,this.triggerInfo=t.triggerInfo,this.entity=t.entity})}create(){this._holiday$=this._service.create().subscribe(i=>{this.viewModel=i.viewModel,this.triggerInfo=i.triggerInfo,this.entity=i.entity})}checkResponse(i){this._router.navigate(i.triggerInfo.succeeded&&i.viewModel.assignee!==this._user.userName?["dispatch",i.viewModel.assignee,"holiday"]:["holiday"])}static#e=this.\u0275fac=function(t){return new(t||y)(e.Y36(_.gz),e.Y36(_.F0),e.Y36(H.K),e.Y36(l))};static#t=this.\u0275cmp=e.Xpm({type:y,selectors:[["tw-holiday"]],viewQuery:function(t,o){if(1&t&&e.Gf(Z,5),2&t){let r;e.iGM(r=e.CRH())&&(o.formDef=r.first)}},features:[e._Bn([l])],decls:6,vars:4,consts:function(){let i,t,o;return i=$localize`:␟ea965d544a7dfd8185064c52cdfff553cf94d585␟6452372740127749380:Messages`,t=$localize`:␟d7293b61e9088c66421df2e367e0ccc00346cf9f␟7071470734400948493:Author`,o=$localize`:␟ccac601bf473fa28c9ac46794f1cd40542f74347␟8066608938393600549:Message`,[[3,"canTrigger","triggerInfo","trigger",4,"ngIf"],[3,"key","viewModel","submitted"],["formDef",""],[4,"ngIf"],[3,"canTrigger","triggerInfo","trigger"],["class","table-responsive-md",4,"ngIf"],[1,"table-responsive-md"],i,t,o,[4,"ngFor","ngForOf"]]},template:function(t,o){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,N,1,2,"tw-trigger-info",0),e.qZA(),e.TgZ(2,"div")(3,"tw-formdef",1,2),e.NdJ("submitted",function(c){return o.submitted(c)}),e.qZA()(),e.YNc(5,R,14,8,"div",3)),2&t){const r=e.MAs(4);e.xp6(1),e.Q6J("ngIf",r),e.xp6(2),e.Q6J("key",o.key)("viewModel",o.viewModel),e.xp6(2),e.Q6J("ngIf",o.entity&&o.entity.id)}},dependencies:[d.sg,d.O5,S.w,L.S,d.uU],encapsulation:2})};u=(0,O.gn)([v.k],u);var Y=n(5370),h=n(453);const P=function(s){return["detail",s]};function $(s,i){if(1&s&&(e.TgZ(0,"div",11)(1,"div",12)(2,"p")(3,"b"),e.SDv(4,13),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"div",14)(8,"p")(9,"b"),e.SDv(10,15),e.qZA(),e._uU(11),e.ALo(12,"date"),e.TgZ(13,"span",16)(14,"b"),e.SDv(15,17),e.qZA(),e._uU(16),e.ALo(17,"date"),e.qZA()()()()()),2&s){const t=i.$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(8,P,null==t?null:t.id)),e.xp6(5),e.hij(" ",null==t?null:t.requester,""),e.xp6(5),e.hij(" ",e.lcZ(12,4,null==t?null:t.from)," "),e.xp6(5),e.hij(" ",e.lcZ(17,6,null==t?null:t.to),"")}}const w=function(){return["detail/new"]};let A=class m{constructor(i,t){this._router=i,this._service=t,this.workspace="pane"}ngOnInit(){this.myWork$=this._service.myWork()}create(){this._router.navigate(["./detail/new"])}reload(){this.ngOnInit()}static#e=this.\u0275fac=function(t){return new(t||m)(e.Y36(_.F0),e.Y36(l))};static#t=this.\u0275cmp=e.Xpm({type:m,selectors:[["tw-holiday-dashboard"]],hostVars:2,hostBindings:function(t,o){2&t&&e.Tol(o.workspace)},features:[e._Bn([l])],decls:15,vars:5,consts:function(){let i,t,o,r;return i=$localize`:␟c38c5590e97411d14a64f2fcee9a1bff7abe0eb3␟9223174834682042610:Holidays`,t=$localize`:␟a050bc4332d7d1982af99c603fc37a70235bb75f␟1754642683981981592:Requester:`,o=$localize`:␟e02703feac6e3e5b095e50c8e537093ac0cb7100␟5487630018331375668:From:`,r=$localize`:␟e2c8f8048544457d662b2ac145da670de270ec95␟5752829569732845992:To:`,[[1,"pane__left"],[3,"rows"],["list",""],i,[1,"button__bar"],[1,"button",3,"routerLink"],["name","plus"],["type","button",3,"click"],["name","refresh"],["twTemplate","holiday-item"],[1,"pane__main"],[1,"list__item"],["routerLinkActive","active",3,"routerLink"],t,[1,"list__itemDetail"],o,[1,"list_item--right"],r]},template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"tw-list",1,2),e.ALo(3,"async"),e.TgZ(4,"tw-header")(5,"h3"),e.SDv(6,3),e.qZA(),e.TgZ(7,"div",4)(8,"a",5),e._UZ(9,"tw-icon",6),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return o.reload()}),e._UZ(11,"tw-icon",8),e.qZA()()(),e.YNc(12,$,18,10,"ng-template",9),e.qZA()(),e.TgZ(13,"div",10),e._UZ(14,"router-outlet"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("rows",e.lcZ(3,2,o.myWork$)),e.xp6(7),e.Q6J("routerLink",e.DdM(4,w)))},dependencies:[_.lC,_.rH,_.Od,Y.o,h.ns,h.Gt,h.VC,d.Ov,d.uU],encapsulation:2})};A=(0,O.gn)([v.k],A);const k=[{path:"",component:A,children:[{path:"detail/:id",component:u},{path:"detail/new",component:u}]}];class p{constructor(i){this._slotRegistry=i,this._slotRegistry.register(new g),this._slotRegistry.register(new f)}static#e=this.\u0275fac=function(t){return new(t||p)(e.LFG(a.FR))};static#t=this.\u0275mod=e.oAB({type:p});static#i=this.\u0275inj=e.cJS({providers:[l],imports:[d.ez,_.Bz.forChild(k),a.eO,D.L,M.Q,C.p,_.Bz]})}}}]);