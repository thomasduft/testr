"use strict";(self.webpackChunkwebclient=self.webpackChunkwebclient||[]).push([[351],{351:(Et,J,l)=>{l.r(J),l.d(J,{AdminModule:()=>I});var r=l(6895),c=l(8852),t=l(5062);class f extends c.fv{constructor(){super(...arguments),this.claim=f.CLAIM_NAME}static#t=this.CLAIM_NAME="workflow_admin";static#e=this.\u0275fac=function(){let o;return function(s){return(o||(o=t.n5z(f)))(s||f)}}();static#o=this.\u0275prov=t.Yz7({token:f,factory:f.\u0275fac})}var p=l(5699),R=l(9116),H=l(5202),h=l(337),B=l(709),W=l(3882),w=l(655),g=l(5570),u=l(453),d=l(8579),U=l(5370),L=l(5529),S=l(1177);class X{constructor(o){this.notifier=o}call(o,e){const s=new z(o),i=(0,S.ft)(this.notifier,new S.IY(s));return i&&!s.seenValue?(s.add(i),e.subscribe(s)):s}}class z extends S.Ds{constructor(o){super(o),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var K=l(13),j=l(4850),V=l(2198);class m{constructor(){this.offset=0,this.debounce=100,this.disabled=!1,this.scrollEnd=new t.vpe,this.scroll$=new L.xQ,this.ngUnsubscribe$=new L.xQ}ngAfterViewInit(){this.scroll$.pipe(function G(n){return o=>o.lift(new X(n))}(this.ngUnsubscribe$),(0,K.b)(this.debounce),(0,j.U)(o=>({y:o.y+this.offset,height:o.height})),(0,V.h)(()=>!this.disabled),(0,V.h)(o=>o.y>=o.height)).subscribe(()=>this.scrollEnd.emit())}onScroll(o,e,s){this.scroll$.next({y:o+s,height:e})}ngOnDestroy(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}static#t=this.\u0275fac=function(e){return new(e||m)};static#e=this.\u0275dir=t.lG2({type:m,selectors:[["","twScroller",""]],hostBindings:function(e,s){1&e&&t.NdJ("scroll",function(a){return s.onScroll(a.target.scrollTop,a.target.scrollHeight,a.target.offsetHeight)})},inputs:{offset:"offset",debounce:"debounce",disabled:"disabled"},outputs:{scrollEnd:"scrollEnd"}})}function tt(n,o){if(1&n&&(t.TgZ(0,"span",2)(1,"b"),t._uU(2,"End:"),t.qZA(),t._uU(3),t.ALo(4,"date"),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,1,null==e.workflow?null:e.workflow.completed)," ")}}const et=function(n){return["detail",n]};class k{constructor(){this.listItem="list__item"}static#t=this.\u0275fac=function(e){return new(e||k)};static#e=this.\u0275cmp=t.Xpm({type:k,selectors:[["tw-workflow-list-item"]],hostVars:2,hostBindings:function(e,s){2&e&&t.Tol(s.listItem)},inputs:{workflow:"workflow"},decls:19,vars:12,consts:[["routerLinkActive","active",3,"routerLink"],[1,"list__itemDetail"],[1,"list_item--right"],["class","list_item--right",4,"ngIf"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"p")(2,"b"),t._uU(3),t.qZA()(),t.TgZ(4,"div",1)(5,"p")(6,"b"),t._uU(7,"State:"),t.qZA(),t._uU(8),t.TgZ(9,"span",2)(10,"b"),t._uU(11,"Assignee:"),t.qZA(),t._uU(12),t.qZA()(),t.TgZ(13,"p")(14,"b"),t._uU(15,"Start:"),t.qZA(),t._uU(16),t.ALo(17,"date"),t.YNc(18,tt,5,3,"span",3),t.qZA()()()),2&e&&(t.Q6J("routerLink",t.VKq(10,et,null==s.workflow?null:s.workflow.id)),t.xp6(1),t.uIk("title",null==s.workflow?null:s.workflow.description),t.xp6(2),t.AsE("",null==s.workflow?null:s.workflow.title," #",null==s.workflow?null:s.workflow.correlationId,""),t.xp6(5),t.hij(" ",null==s.workflow?null:s.workflow.state," "),t.xp6(4),t.hij(" ",null==s.workflow?null:s.workflow.assignee," "),t.xp6(4),t.hij(" ",t.lcZ(17,8,null==s.workflow?null:s.workflow.started)," "),t.xp6(2),t.Q6J("ngIf",null==s.workflow?null:s.workflow.completed))},dependencies:[r.O5,p.rH,p.Od,r.uU],encapsulation:2})}class C{constructor(){this.key=C.KEY,this.type=h.AF,this.title="",this.editors=[{key:"type",type:h.P8,label:"Type",required:!1},{key:"correlationId",type:h.Cz,label:"Correlation Id",required:!1},{key:"assignee",type:h.P8,label:"Assignee",required:!1}]}static#t=this.KEY="workflowsearchslot"}var ot=l(5108);class T{constructor(){this.empty={type:null,correlationId:null,assignee:null},this.key=C.KEY,this.searchClicked=new t.vpe,this.resettedClicked=new t.vpe,this.class="workflow__search"}ngOnInit(){void 0===this.viewModel&&(this.viewModel=this.empty)}search(o){this.searchClicked.emit(o)}reset(){this.resettedClicked.emit()}static#t=this.\u0275fac=function(e){return new(e||T)};static#e=this.\u0275cmp=t.Xpm({type:T,selectors:[["tw-workflow-search"]],hostVars:2,hostBindings:function(e,s){2&e&&t.Tol(s.class)},inputs:{viewModel:"viewModel"},outputs:{searchClicked:"searchClicked",resettedClicked:"resettedClicked"},decls:1,vars:5,consts:[[3,"showSave","showCancel","saveTitle","key","viewModel","submitted","resetted"]],template:function(e,s){1&e&&(t.TgZ(0,"tw-formdef",0),t.NdJ("submitted",function(a){return s.search(a)})("resetted",function(){return s.reset()}),t.qZA()),2&e&&t.Q6J("showSave",!0)("showCancel",!0)("saveTitle","Apply")("key",s.key)("viewModel",s.viewModel)},dependencies:[ot.w],encapsulation:2})}function st(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tw-workflow-search",12),t.NdJ("searchClicked",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.searchClicked(i))})("resettedClicked",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.resettedClicked())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("viewModel",e.searchModel)}}function nt(n,o){1&n&&t._UZ(0,"tw-workflow-list-item",13),2&n&&t.Q6J("workflow",o.$implicit)}const it=function(n){return{"button--secondary":n}};let N=class F{constructor(o){this._service=o,this.page=c.vy.create(),this.hasFilter=!1,this.showFilter=!1,this.workflows=[],this.workspace="pane"}ngOnInit(){const o=this.createModel(this.page,this.searchModel);this.loadPage(o)}toggle(){this.showFilter=!this.showFilter}reload(){this.list.rows=[],this.page=c.vy.create(),this.ngOnInit()}loadNextPage(){if(this.page.totalPages-1>this.page.pageIndex){const o=this.createModel(c.vy.createNextPage(this.page.pageIndex),this.searchModel);this.loadPage(o)}}searchClicked(o){this.hasFilter=!0,this.searchModel=o,this.list.rows=[],this.page=c.vy.create();const e=this.createModel(this.page,this.searchModel);this.loadPage(e)}resettedClicked(){this.searchClicked({type:null,correlationId:null,assignee:null}),this.hasFilter=!1}loadPage(o){this.workflows$=this._service.workflows(o).subscribe(e=>{const s=JSON.parse(e.headers.get("X-Pagination"));this.page=c.vy.fromResponse(s),this.list.attachRows(e.body)})}createModel(o,e){return d.wA.createWorkflowPagingModel(o,e)}static#t=this.\u0275fac=function(e){return new(e||F)(t.Y36(d.zy))};static#e=this.\u0275cmp=t.Xpm({type:F,selectors:[["tw-workflow-dashboard"]],viewQuery:function(e,s){if(1&e&&t.Gf(u.ns,5),2&e){let i;t.iGM(i=t.CRH())&&(s.list=i.first)}},hostVars:2,hostBindings:function(e,s){2&e&&t.Tol(s.workspace)},features:[t._Bn([d.zy])],decls:16,vars:6,consts:function(){let o;return o=$localize`:␟3c91afaf920d7e230b74f363a47d65f2e97b54f8␟2448409548926769984:Instances`,[["twScroller","",1,"pane__left",3,"offset","scrollEnd"],[3,"rows"],["list",""],o,[1,"button__bar"],["type","button",3,"click"],["name","refresh"],["type","button",3,"ngClass","click"],["name","filter"],[3,"viewModel","searchClicked","resettedClicked",4,"ngIf"],["twTemplate","workflow-item"],[1,"pane__main"],[3,"viewModel","searchClicked","resettedClicked"],[3,"workflow"]]},template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.NdJ("scrollEnd",function(){return s.loadNextPage()}),t.TgZ(1,"tw-list",1,2)(3,"tw-header")(4,"h3"),t.SDv(5,3),t.qZA(),t.TgZ(6,"div",4)(7,"button",5),t.NdJ("click",function(){return s.reload()}),t._UZ(8,"tw-icon",6),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return s.toggle()}),t._UZ(10,"tw-icon",8),t._uU(11," Filter "),t.qZA()(),t.YNc(12,st,1,1,"tw-workflow-search",9),t.qZA(),t.YNc(13,nt,1,1,"ng-template",10),t.qZA()(),t.TgZ(14,"div",11),t._UZ(15,"router-outlet"),t.qZA()),2&e&&(t.Q6J("offset",50),t.xp6(1),t.Q6J("rows",s.workflows),t.xp6(8),t.Q6J("ngClass",t.VKq(4,it,s.hasFilter)),t.xp6(3),t.Q6J("ngIf",s.showFilter))},dependencies:[r.mk,r.O5,p.lC,U.o,u.ns,u.Gt,u.VC,m,k,T],encapsulation:2})};N=(0,w.gn)([g.k],N);var lt=l(6622);function at(n,o){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"tw-workflow-list-item",2),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("workflow",e.workflow)}}function rt(n,o){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"tw-dot",3),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("dot",e.dot)}}function ct(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(t.xi3(3,4,e.created,"MM/dd/yyyy HH:mm:ss")),t.xp6(3),t.Oqu(e.fromState),t.xp6(2),t.Oqu(e.toState),t.xp6(2),t.Oqu(e.userName)}}function ut(n,o){if(1&n&&(t.TgZ(0,"div")(1,"h3"),t._uU(2,"History"),t.qZA(),t.TgZ(3,"table")(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Created"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"From"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"To"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"User"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,ct,10,7,"tr",4),t.qZA()()()),2&n){const e=t.oxw();t.xp6(15),t.Q6J("ngForOf",e.history)}}function dt(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.content)}}function ft(n,o){if(1&n&&(t.TgZ(0,"div")(1,"h3"),t._uU(2,"Variables"),t.qZA(),t.TgZ(3,"table")(4,"thead")(5,"tr")(6,"th"),t._uU(7,"Content"),t.qZA()()(),t.TgZ(8,"tbody"),t.YNc(9,dt,3,1,"tr",4),t.qZA()()()),2&n){const e=t.oxw();t.xp6(9),t.Q6J("ngForOf",e.variables)}}let E=class D{constructor(o,e){this._route=o,this._workflowService=e}ngOnInit(){this.routeParams$=this._route.params.subscribe(o=>{o.id&&this.init(o.id)})}init(o){this.workflow$=this._workflowService.get(Number(o)).subscribe(e=>{this.workflow=e,this.loadDot(this.workflow.type,this.workflow.correlationId),this.loadHistory(this.workflow.id),this.loadVariables(this.workflow.id)})}loadDot(o,e){this.dot$=this._workflowService.dotWithHistory(o,e).subscribe(s=>{this.dot={dot:s}})}loadHistory(o){this.history$=this._workflowService.getHistory(o).subscribe(e=>{this.history=e})}loadVariables(o){this.history$=this._workflowService.getVariables(o).subscribe(e=>{this.variables=e})}static#t=this.\u0275fac=function(e){return new(e||D)(t.Y36(p.gz),t.Y36(d.zy))};static#e=this.\u0275cmp=t.Xpm({type:D,selectors:[["tw-workflow"]],decls:7,vars:4,consts:[[1,"workflow"],[4,"ngIf"],[3,"workflow"],[3,"dot"],[4,"ngFor","ngForOf"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"h3"),t._uU(2,"Overview"),t.qZA(),t.YNc(3,at,2,1,"div",1),t.YNc(4,rt,2,1,"div",1),t.YNc(5,ut,16,1,"div",1),t.YNc(6,ft,10,1,"div",1),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",s.workflow),t.xp6(1),t.Q6J("ngIf",s.dot),t.xp6(1),t.Q6J("ngIf",s.history&&s.history.length>0),t.xp6(1),t.Q6J("ngIf",s.variables&&s.variables.length>0))},dependencies:[r.sg,r.O5,lt.$,k,r.uU],encapsulation:2})};E=(0,w.gn)([g.k],E);const pt=[{path:"workflows",component:N,canActivate:[f],children:[{path:"detail/:id",component:E}]}];class v{constructor(o){this._slotRegistry=o,this._slotRegistry.register(new C)}static#t=this.\u0275fac=function(e){return new(e||v)(t.LFG(h.FR))};static#e=this.\u0275mod=t.oAB({type:v});static#o=this.\u0275inj=t.cJS({imports:[r.ez,p.Bz.forChild(pt),h.eO,B.L,R.Q,H.p,W.v]})}var ht=l(3482);function mt(n,o){1&n&&t.Hsn(0,0,["*ngIf","active"])}const _t=["*"];class b{constructor(){this.style="tabs__tab",this.active=!1}static#t=this.\u0275fac=function(e){return new(e||b)};static#e=this.\u0275cmp=t.Xpm({type:b,selectors:[["tw-tab"]],hostVars:2,hostBindings:function(e,s){2&e&&t.Tol(s.style)},inputs:{title:"title",active:"active"},ngContentSelectors:_t,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,s){1&e&&(t.F$t(),t.YNc(0,mt,1,0,"ng-content",0)),2&e&&t.Q6J("ngIf",s.active)},dependencies:[r.O5],encapsulation:2})}const wt=function(n){return{"tab__title--active":n}};function gt(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",1),t.NdJ("click",function(){const a=t.CHM(e).$implicit,P=t.oxw();return t.KtG(P.selectTab(a))})("keydown",function(i){const P=t.CHM(e).$implicit,Nt=t.oxw();return t.KtG(Nt.keydownOnTab(i,P))}),t.TgZ(1,"span",2),t._uU(2),t.qZA()()}if(2&n){const e=o.$implicit,s=t.oxw();t.Q6J("ngClass",t.VKq(3,wt,e.active)),t.uIk("tabindex",s.getTabIndex(e)),t.xp6(2),t.Oqu(e.title)}}const kt=["*"];class y{constructor(){this.style="tabs"}ngAfterContentInit(){0===this.tabs.filter(e=>e.active).length&&setTimeout(()=>this.selectTab(this.tabs.first))}getTabIndex(o){return o.active?null:0}selectTab(o){this.tabs.toArray().forEach(e=>e.active=!1),o.active=!0}keydownOnTab(o,e){(13===o.keyCode||32===o.keyCode)&&this.selectTab(e)}static#t=this.\u0275fac=function(e){return new(e||y)};static#e=this.\u0275cmp=t.Xpm({type:y,selectors:[["tw-tabs"]],contentQueries:function(e,s,i){if(1&e&&t.Suo(i,b,4),2&e){let a;t.iGM(a=t.CRH())&&(s.tabs=a)}},hostVars:2,hostBindings:function(e,s){2&e&&t.Tol(s.style)},ngContentSelectors:kt,decls:3,vars:1,consts:[["class","tabs__tab",3,"ngClass","click","keydown",4,"ngFor","ngForOf"],[1,"tabs__tab",3,"ngClass","click","keydown"],[1,"tab__title"]],template:function(e,s){1&e&&(t.F$t(),t.TgZ(0,"ul"),t.YNc(1,gt,3,5,"li",0),t.qZA(),t.Hsn(2)),2&e&&(t.xp6(1),t.Q6J("ngForOf",s.tabs))},dependencies:[r.mk,r.sg],encapsulation:2})}var bt=l(6498),Y=l(6014),Ct=l(6688);function yt(n){const{subscriber:o,counter:e,period:s}=n;o.next(e),this.schedule({subscriber:o,counter:e+1,period:s},s)}const At=function(n){return[".",n]};class _{constructor(){this.listItem="list__item"}static#t=this.\u0275fac=function(e){return new(e||_)};static#e=this.\u0275cmp=t.Xpm({type:_,selectors:[["tw-queue-list-item"]],hostVars:2,hostBindings:function(e,s){2&e&&t.Tol(s.listItem)},inputs:{queueItem:"queueItem"},decls:18,vars:12,consts:[["routerLinkActive","active",3,"routerLink"],[1,"list__itemDetail"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"p")(2,"b"),t._uU(3),t.qZA()(),t.TgZ(4,"div",1)(5,"p")(6,"b"),t._uU(7,"Error:"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"p")(10,"b"),t._uU(11,"Retries:"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p")(14,"b"),t._uU(15,"DueDate:"),t.qZA(),t._uU(16),t.ALo(17,"date"),t.qZA()()()),2&e&&(t.Q6J("routerLink",t.VKq(10,At,null==s.queueItem?null:s.queueItem.id)),t.uIk("title",null==s.queueItem?null:s.queueItem.workflowType),t.xp6(3),t.AsE("",null==s.queueItem?null:s.queueItem.triggerName," #",null==s.queueItem?null:s.queueItem.entityId,""),t.xp6(5),t.hij(" ",null==s.queueItem?null:s.queueItem.error," "),t.xp6(4),t.hij(" ",null==s.queueItem?null:s.queueItem.retries," "),t.xp6(4),t.hij(" ",t.xi3(17,7,null==s.queueItem?null:s.queueItem.dueDate,"MM/dd/yyyy-hh:mm:ss")," "))},dependencies:[p.rH,p.Od,r.uU],encapsulation:2})}function Zt(n,o){1&n&&t._UZ(0,"tw-queue-list-item",3),2&n&&t.Q6J("queueItem",o.$implicit)}let M=class Q{constructor(o){this._service=o,this.snapshotItems=[],this.style="pane"}ngOnInit(){this.intervall$=function vt(n=0,o=Y.P){return(!function Tt(n){return!(0,Ct.k)(n)&&n-parseFloat(n)+1>=0}(n)||n<0)&&(n=0),(!o||"function"!=typeof o.schedule)&&(o=Y.P),new bt.y(e=>(e.add(o.schedule(yt,n,{subscriber:e,counter:0,period:n})),e))}(5e3).subscribe(()=>{this.loadData()})}loadData(){this.loadSnapshot()}loadSnapshot(){this.snapshotItems$=this._service.snapshot().subscribe(o=>{this.snapshotItems=o})}static#t=this.\u0275fac=function(e){return new(e||Q)(t.Y36(d.u8))};static#e=this.\u0275cmp=t.Xpm({type:Q,selectors:[["tw-snapshots"]],hostVars:2,hostBindings:function(e,s){2&e&&t.Tol(s.style)},features:[t._Bn([d.u8])],decls:3,vars:1,consts:[[1,"pane__main"],[3,"rows"],["twTemplate","queueItem-item"],[3,"queueItem"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"tw-list",1),t.YNc(2,Zt,1,1,"ng-template",2),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("rows",s.snapshotItems))},dependencies:[u.ns,u.VC,_],encapsulation:2})};function It(n,o){1&n&&t._UZ(0,"tw-queue-list-item",6),2&n&&t.Q6J("queueItem",o.$implicit)}M=(0,w.gn)([g.k],M);let q=class x{constructor(o){this._service=o,this.upcommingPage=c.vy.create(),this.upcommingItems=[],this.style="pane"}ngOnInit(){this.loadData()}loadNextPage(){this.upcommingPage.totalPages-1>this.upcommingPage.pageIndex&&this.loadUpcommings(c.vy.createNextPage(this.upcommingPage.pageIndex,50))}refresh(){this.upcommingList.rows=[],this.upcommingPage=c.vy.create(),this.ngOnInit()}loadData(){this.loadUpcommings(this.upcommingPage)}loadUpcommings(o){this.upcommingItems$=this._service.upcommings(o).subscribe(e=>{const s=JSON.parse(e.headers.get("X-Pagination"));this.upcommingPage=c.vy.fromResponse(s),this.upcommingList.attachRows(e.body)})}static#t=this.\u0275fac=function(e){return new(e||x)(t.Y36(d.u8))};static#e=this.\u0275cmp=t.Xpm({type:x,selectors:[["tw-upcommings"]],viewQuery:function(e,s){if(1&e&&t.Gf(u.ns,5),2&e){let i;t.iGM(i=t.CRH())&&(s.upcommingList=i.first)}},hostVars:2,hostBindings:function(e,s){2&e&&t.Tol(s.style)},features:[t._Bn([d.u8])],decls:7,vars:2,consts:[["twScroller","",1,"pane__main",3,"offset","scrollEnd"],[3,"rows"],[1,"button__bar"],["type","button",3,"click"],["name","refresh"],["twTemplate","upcomming-item"],[3,"queueItem"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.NdJ("scrollEnd",function(){return s.loadNextPage()}),t.TgZ(1,"tw-list",1)(2,"tw-header")(3,"div",2)(4,"button",3),t.NdJ("click",function(){return s.refresh()}),t._UZ(5,"tw-icon",4),t.qZA()()(),t.YNc(6,It,1,1,"ng-template",5),t.qZA()()),2&e&&(t.Q6J("offset",40),t.xp6(1),t.Q6J("rows",s.upcommingItems))},dependencies:[U.o,u.ns,u.Gt,u.VC,m,_],encapsulation:2})};function Ut(n,o){1&n&&t._UZ(0,"tw-queue-list-item",6),2&n&&t.Q6J("queueItem",o.$implicit)}q=(0,w.gn)([g.k],q);let O=class ${constructor(o){this._service=o,this.failedPage=c.vy.create(),this.failedItems=[],this.style="pane"}ngOnInit(){this.loadData()}loadNextPage(){this.failedPage.totalPages-1>this.failedPage.pageIndex&&this.loadFailed(c.vy.createNextPage(this.failedPage.pageIndex,50))}refresh(){this.failedList.rows=[],this.failedPage=c.vy.create(),this.ngOnInit()}loadData(){this.loadFailed(this.failedPage)}loadFailed(o){this.failedItems$=this._service.failed(o).subscribe(e=>{const s=JSON.parse(e.headers.get("X-Pagination"));this.failedPage=c.vy.fromResponse(s),this.failedList.attachRows(e.body)})}static#t=this.\u0275fac=function(e){return new(e||$)(t.Y36(d.u8))};static#e=this.\u0275cmp=t.Xpm({type:$,selectors:[["tw-failed"]],viewQuery:function(e,s){if(1&e&&t.Gf(u.ns,5),2&e){let i;t.iGM(i=t.CRH())&&(s.failedList=i.first)}},hostVars:2,hostBindings:function(e,s){2&e&&t.Tol(s.style)},features:[t._Bn([d.u8])],decls:7,vars:2,consts:[["twScroller","",1,"pane__main",3,"offset","scrollEnd"],[3,"rows"],[1,"button__bar"],["type","button",3,"click"],["name","refresh"],["twTemplate","failed-item"],[3,"queueItem"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0),t.NdJ("scrollEnd",function(){return s.loadNextPage()}),t.TgZ(1,"tw-list",1)(2,"tw-header")(3,"div",2)(4,"button",3),t.NdJ("click",function(){return s.refresh()}),t._UZ(5,"tw-icon",4),t.qZA()()(),t.YNc(6,Ut,1,1,"ng-template",5),t.qZA()()),2&e&&(t.Q6J("offset",40),t.xp6(1),t.Q6J("rows",s.failedItems))},dependencies:[U.o,u.ns,u.Gt,u.VC,m,_],encapsulation:2})};O=(0,w.gn)([g.k],O);class A{constructor(){this.workspace="pane"}static#t=this.\u0275fac=function(e){return new(e||A)};static#e=this.\u0275cmp=t.Xpm({type:A,selectors:[["tw-queue-dashboard"]],hostVars:2,hostBindings:function(e,s){2&e&&t.Tol(s.workspace)},decls:7,vars:0,consts:function(){let o,e,s;return o=$localize`:␟f8fdc777736a0356a290fff7e0a10b990c65a017␟1128905482898990938:Snapshot`,e=$localize`:␟e85efeb92cc58441f5360ad14eb47fd7d2dc9a73␟597970232571542041:Upcommings`,s=$localize`:␟64b582e0d8e3a28331a14d2a1017fa5d6ffb8d93␟7256395947475975935:Failed`,[["title",o],["title",e],["title",s]]},template:function(e,s){1&e&&(t.TgZ(0,"tw-tabs")(1,"tw-tab",0),t._UZ(2,"tw-snapshots"),t.qZA(),t.TgZ(3,"tw-tab",1),t._UZ(4,"tw-upcommings"),t.qZA(),t.TgZ(5,"tw-tab",2),t._UZ(6,"tw-failed"),t.qZA()())},dependencies:[y,b,M,q,O],encapsulation:2})}const St=[{path:"queue",component:A,canActivate:[f]}];class Z{static#t=this.\u0275fac=function(e){return new(e||Z)};static#e=this.\u0275mod=t.oAB({type:Z});static#o=this.\u0275inj=t.cJS({imports:[r.ez,p.Bz.forChild(St),h.eO,B.L,R.Q,H.p,W.v,ht.I]})}class I{static#t=this.\u0275fac=function(e){return new(e||I)};static#e=this.\u0275mod=t.oAB({type:I});static#o=this.\u0275inj=t.cJS({providers:[f],imports:[r.ez,v,Z]})}}}]);